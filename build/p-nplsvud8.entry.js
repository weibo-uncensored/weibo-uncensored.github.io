import{r as e,h as t}from"./p-b8715656.js";import"./p-316cddd3.js";import"./p-3e9c62cb.js";import"./p-39c54535.js";import"./p-f0e75443.js";import"./p-fe44e552.js";import{e as s}from"./p-25159729.js";import"./p-344f5acf.js";import{U as r}from"./p-9dcbe002.js";const a=new class{constructor(){}async submitSuggestions(e){try{if(e.length>s.limits.maxSubmissionLengthInBytes)return{status:"error",error:"Maximum submission length exceeded"};var t=e.split("\n").map(e=>e.trim());if(0==t.length)return{status:"error",error:"Please enter at least one hashtag or search term to add to the index."};if(t.length>s.limits.maxItemsPerSubmission)return{status:"error",error:`Please submit fewer than ${s.limits.maxItemsPerSubmission} items at a time.`};var r={searches:t,urls:[]};console.log(JSON.stringify(r));const i=await fetch(s.endpoints.userSuggestionApi,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});var a=await i.json();return console.log(JSON.stringify(a)),{status:"success",response:a}}catch(i){return{status:"error",error:i}}}},i=class{constructor(t){e(this,t),this.prompt="Enter Weibo hashtags (e.g. #新型冠状病毒#) or search queries (e.g. 新型冠状病毒) that you would like to be monitored for censorship and regularly archived!",this.submitInProgress=!1,this.suggestions=""}async submitSuggestions(e){this.submitInProgress=!0;try{var t=await a.submitSuggestions(this.suggestions);this.submitInProgress=!1,"success"==t.status?(alert("Thank you! Your suggestions have been received and will appear in the index shortly."),r.dismissModal()):alert(t.error)}catch(e){alert("Server error. Please try again later."),r.dismissModal()}e.preventDefault()}render(){return[t("ion-list",null,t("ion-item",null,t("p",null,this.prompt)),t("ion-item",null,t("ion-label",{position:"stacked"},"Enter Topics Below"),t("ion-textarea",{class:"tall",disabled:this.submitInProgress,placeholder:"Enter 1 item per line. Max 1000 lines",onInput:e=>{this.suggestions=e.target.value}}))),t("div",{class:"ion-padding"},t("ion-button",{disabled:this.submitInProgress,onClick:e=>{this.submitSuggestions(e),e.preventDefault()},expand:"block",type:"submit",class:"ion-no-margin"},"Add Search Terms"))]}static get style(){return":host{display:block}ion-textarea.tall{height:120px}"}};export{i as user_add_tags};