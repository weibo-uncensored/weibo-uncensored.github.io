var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;for(var s=Array(e),o=0,t=0;t<n;t++)for(var r=arguments[t],i=0,a=r.length;i<a;i++,o++)s[o]=r[i];return s};System.register(["./p-1fa942a3.system.js","./p-285d6389.system.js"],(function(e){"use strict";var t,n,s;return{setters:[function(e){t=e.r;n=e.h},function(e){s=e.W}],execute:function(){var o=50;var r=e("weibo_viewer",function(){function e(e){t(this,e);this.offset=0;this.posts=[];this.hashtags=[];this.onlyShowCensored=false;this.hideViewMore=false;this.currentSearchTxid=""}e.prototype.componentDidLoad=function(){var e=this;s.hashtagIndex$.subscribe((function(t){e.hashtags=__spreadArrays(e.hashtags.concat(t));console.log(JSON.stringify(t,null,2))}));s.getHashtagIndex(this.offset,o)};e.prototype.toggleCensoredFilter=function(){if(this.onlyShowCensored){this.onlyShowCensored=false;this.hashtags.length=0;this.offset=0;s.getHashtagIndex(this.offset,o)}else{this.onlyShowCensored=true;var e=s.censoredHashtags;this.hashtags=__spreadArrays(e)}};e.prototype.getNextPage=function(){this.offset+=o;s.getHashtagIndex(this.offset,o)};e.prototype.handleSearchEvent=function(e){console.log(JSON.stringify(e));var t=e.target.value.toLowerCase();if(t==""){this.offset=0;this.hideViewMore=false;this.hashtags=__spreadArrays(s.hashtagIndex.slice(this.offset,o));return}if(!t.startsWith("#"))t="#"+t;var n=s.hashtagIndex.filter((function(e){return e.hashtag.startsWith(t)})).slice(0,o);this.hideViewMore=true;this.hashtags=__spreadArrays(n)};e.prototype.render=function(){var e=this;return[n("ion-header",null,n("ion-toolbar",{color:"primary"},n("ion-title",null,"Hashtag Archive"))),n("ion-content",{class:"ion-padding"},n("ion-item",null,n("ion-toggle",{slot:"end",onIonChange:function(t){e.toggleCensoredFilter();t.preventDefault()}}),n("ion-label",null,"Only Show Censored")),n("ion-item",{class:this.onlyShowCensored?"viewMoreHidden":""},n("ion-input",{debounce:200,placeholder:"Type to Search",type:"text",onInput:function(t){return e.handleSearchEvent(t)}})),n("ion-list",null,this.hashtags.map((function(e){return n("ion-item",null,n("ion-label",null,e.censored?n("ion-chip",{color:"danger"},n("ion-label",null,"CENSORED!")):"",n("ion-router-link",{href:"weibo-viewer/"+e.hashtag+"/posts"},e.hashtag)),n("ion-badge",{slot:"end"},e.count))}))),n("ion-button",{class:this.hashtags.length>0&&!this.hideViewMore&&!this.onlyShowCensored?"":"viewMoreHidden",onClick:function(t){e.getNextPage();console.log(t);return false},expand:"block",fill:"outline"},"View More..."))]};Object.defineProperty(e,"style",{get:function(){return":host{display:block}.hscroll{width:100%;overflow-y:auto}.min-500{min-width:900px!important;width:100%}.darkred{color:#c00!important}.viewMoreHidden{display:none}"},enumerable:true,configurable:true});return e}())}}}));