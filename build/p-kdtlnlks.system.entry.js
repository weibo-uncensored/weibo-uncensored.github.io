var __spreadArrays=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<o;t++)for(var i=arguments[t],r=0,a=i.length;r<a;r++,s++)n[s]=i[r];return n};System.register(["./p-1fa942a3.system.js","./p-3f376874.system.js","./p-35047b4c.system.js","./p-9c9f2bdf.system.js","./p-65c980d9.system.js","./p-4e1706df.system.js","./p-b7e4181f.system.js","./p-a51f0ae4.system.js","./p-468ac7e0.system.js","./p-6571b592.system.js"],(function(e){"use strict";var t,o,n,s;return{setters:[function(e){t=e.r;o=e.h},function(){},function(){},function(){},function(){},function(){},function(e){n=e.U},function(){},function(){},function(e){s=e.W}],execute:function(){var i=50;var r=e("weibo_viewer",function(){function e(e){t(this,e);this.offset=0;this.posts=[];this.hashtags=[];this.onlyShowCensored=false;this.hideViewMore=false;this.loading=false;this.currentSearchTxid=""}e.prototype.about=function(){n.showModal("About WeiBlocked","<about-us></about-us>")};e.prototype.addHashtags=function(){n.showModal("Add New Topics","<user-add-tags></user-add-tags>")};e.prototype.componentDidLoad=function(){var e=this;this.loading=true;s.hashtagIndex$.subscribe((function(t){if(t.length>0)e.loading=false;e.hashtags=__spreadArrays(e.hashtags.concat(t));console.log(JSON.stringify(t,null,2))}));s.getHashtagIndex(this.offset,i)};e.prototype.toggleCensoredFilter=function(){if(this.onlyShowCensored){this.onlyShowCensored=false;this.hashtags.length=0;this.offset=0;s.getHashtagIndex(this.offset,i)}else{this.onlyShowCensored=true;var e=s.censoredHashtags;this.hashtags=__spreadArrays(e)}};e.prototype.getNextPage=function(){this.offset+=i;s.getHashtagIndex(this.offset,i)};e.prototype.handleSearchEvent=function(e){console.log(JSON.stringify(e));var t=e.target.value.toLowerCase();if(t==""){this.offset=0;this.hideViewMore=false;this.hashtags=__spreadArrays(s.hashtagIndex.slice(this.offset,i));return}if(!t.startsWith("#"))t="#"+t;var o=s.hashtagIndex.filter((function(e){return e.hashtag.startsWith(t)})).slice(0,i);this.hideViewMore=true;this.hashtags=__spreadArrays(o)};e.prototype.showViewMore=function(){return this.hashtags.length>0&&!this.hideViewMore&&!this.onlyShowCensored?"":"viewMoreHidden"};e.prototype.render=function(){var e=this;return[o("ion-header",null,o("ion-toolbar",{color:"medium"},o("ion-title",null,this.onlyShowCensored?"BANNED":"All "," Hashtags"),o("ion-buttons",{slot:"end"},o("ion-button",{onClick:function(t){e.about();t.preventDefault()}},o("ion-icon",{slot:"icon-only",name:"information-circle"})),o("ion-button",{onClick:function(t){e.addHashtags();t.preventDefault()}},o("ion-icon",{slot:"icon-only",name:"add"})))),o("ion-toolbar",{color:"light",class:!this.loading?"viewMoreHidden":""},o("ion-title",null,"Loading... Please Wait")),o("ion-toolbar",{color:"light",class:this.loading?"viewMoreHidden":""},o("ion-input",{disabled:this.onlyShowCensored,class:"ion-padding",debounce:200,placeholder:"Type to Search",type:"text",onInput:function(t){return e.handleSearchEvent(t)}}))),o("ion-content",{class:"ion-padding "+(this.loading?"viewMoreHidden":"")},o("ion-list",null,o("ion-list-header",{color:"light"},o("p",null,"Showing ",this.hashtags.length," of ",this.onlyShowCensored?s.censoredHashtags.length:s.hashtagIndex.length," Hashtags")),this.hashtags.map((function(e){return o("ion-item",null,o("ion-label",null,e.censored?o("ion-chip",{color:"danger"},o("ion-label",null,"CENSORED!")):"",o("ion-router-link",{href:"weibo-viewer/"+e.hashtag+"/posts"},e.hashtag),o("br",null),e.english),o("ion-badge",{slot:"end"},e.count))}))),o("ion-button",{class:this.hashtags.length>0&&!this.hideViewMore&&!this.onlyShowCensored?"":"viewMoreHidden",onClick:function(t){e.getNextPage();console.log(t);return false},expand:"block",fill:"outline"},"View More...")),o("ion-footer",{color:"light"},o("censored-filter",{label:"Censored Topics",censored:this.onlyShowCensored,onToggle:function(t){return e.toggleCensoredFilter()}}))]};Object.defineProperty(e,"style",{get:function(){return":host{display:block}.hscroll{width:100%;overflow-y:auto}.min-500{min-width:900px!important;width:100%}.darkred{color:#c00!important}.viewMoreHidden{display:none}"},enumerable:true,configurable:true});return e}())}}}));