import{r as i,h as o}from"./p-b8715656.js";import"./p-316cddd3.js";import"./p-3e9c62cb.js";import"./p-39c54535.js";import"./p-f0e75443.js";import"./p-fe44e552.js";import"./p-344f5acf.js";import{U as t}from"./p-9dcbe002.js";import"./p-b58c1283.js";import{W as s}from"./p-bc6cd0ea.js";const e=class{constructor(o){i(this,o),this.offset=0,this.posts=[],this.hashtags=[],this.onlyShowCensored=!1,this.hideViewMore=!1,this.loading=!1,this.currentSearchTxid=""}about(){t.showModal("About WeiBlocked","<about-us></about-us>")}addHashtags(){t.showModal("Add New Topics","<user-add-tags></user-add-tags>")}componentDidLoad(){this.loading=!0,s.hashtagIndex$.subscribe(i=>{i.length>0&&(this.loading=!1),this.hashtags=[...this.hashtags.concat(i)],console.log(JSON.stringify(i,null,2))}),s.getHashtagIndex(this.offset,50)}toggleCensoredFilter(){this.onlyShowCensored?(this.onlyShowCensored=!1,this.hashtags.length=0,this.offset=0,s.getHashtagIndex(this.offset,50)):(this.onlyShowCensored=!0,this.hashtags=[...s.censoredHashtags])}getNextPage(){this.offset+=50,s.getHashtagIndex(this.offset,50)}handleSearchEvent(i){console.log(JSON.stringify(i));var o=i.target.value.toLowerCase();if(""==o)return this.offset=0,this.hideViewMore=!1,void(this.hashtags=[...s.hashtagIndex.slice(this.offset,50)]);o.startsWith("#")||(o="#"+o);var t=s.hashtagIndex.filter(i=>i.hashtag.startsWith(o)).slice(0,50);this.hideViewMore=!0,this.hashtags=[...t]}showViewMore(){return this.hashtags.length>0&&!this.hideViewMore&&!this.onlyShowCensored?"":"viewMoreHidden"}render(){return[o("ion-header",null,o("ion-toolbar",{color:"medium"},o("ion-title",null,this.onlyShowCensored?"BANNED":"All "," Hashtags"),o("ion-buttons",{slot:"end"},o("ion-button",{onClick:i=>{this.about(),i.preventDefault()}},o("ion-icon",{slot:"icon-only",name:"information-circle"})),o("ion-button",{onClick:i=>{this.addHashtags(),i.preventDefault()}},o("ion-icon",{slot:"icon-only",name:"add"})))),o("ion-toolbar",{color:"light",class:this.loading?"":"viewMoreHidden"},o("ion-title",null,"Loading... Please Wait")),o("ion-toolbar",{color:"light",class:this.loading?"viewMoreHidden":""},o("ion-input",{disabled:this.onlyShowCensored,class:"ion-padding",debounce:200,placeholder:"Type to Search",type:"text",onInput:i=>this.handleSearchEvent(i)}))),o("ion-content",{class:"ion-padding "+(this.loading?"viewMoreHidden":"")},o("ion-list",null,o("ion-list-header",{color:"light"},o("p",null,"Showing ",this.hashtags.length," of ",this.onlyShowCensored?s.censoredHashtags.length:s.hashtagIndex.length," Hashtags")),this.hashtags.map(i=>o("ion-item",null,o("ion-label",null,i.censored?o("ion-chip",{color:"danger"},o("ion-label",null,"CENSORED!")):"",o("ion-router-link",{href:`weibo-viewer/${i.hashtag}/posts`},i.hashtag)),o("ion-badge",{slot:"end"},i.count)))),o("ion-button",{class:this.hashtags.length>0&&!this.hideViewMore&&!this.onlyShowCensored?"":"viewMoreHidden",onClick:i=>(this.getNextPage(),console.log(i),!1),expand:"block",fill:"outline"},"View More...")),o("ion-footer",{color:"light"},o("ion-toolbar",null,o("ion-toggle",{slot:"start",onIonChange:i=>{this.toggleCensoredFilter(),i.preventDefault()}}),o("ion-title",null,"Censored Tags Only")))]}static get style(){return":host{display:block}.hscroll{width:100%;overflow-y:auto}.min-500{min-width:900px!important;width:100%}.darkred{color:#c00!important}.viewMoreHidden{display:none}"}};export{e as weibo_viewer};