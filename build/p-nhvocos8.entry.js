import{r as i,h as t}from"./p-b8715656.js";import"./p-316cddd3.js";import"./p-c515d112.js";import"./p-1ec96a31.js";import"./p-2485d89a.js";import"./p-fe44e552.js";import{W as o}from"./p-36480725.js";import"./p-344f5acf.js";const s=class{constructor(t){i(this,t),this.offset=0,this.posts=[],this.hashtags=[],this.onlyShowCensored=!1,this.hideViewMore=!1,this.loading=!1,this.currentSearchTxid=""}about(){o.showAbout()}componentDidLoad(){this.loading=!0,o.hashtagIndex$.subscribe(i=>{i.length>0&&(this.loading=!1),this.hashtags=[...this.hashtags.concat(i)],console.log(JSON.stringify(i,null,2))}),o.getHashtagIndex(this.offset,50)}toggleCensoredFilter(){this.onlyShowCensored?(this.onlyShowCensored=!1,this.hashtags.length=0,this.offset=0,o.getHashtagIndex(this.offset,50)):(this.onlyShowCensored=!0,this.hashtags=[...o.censoredHashtags])}getNextPage(){this.offset+=50,o.getHashtagIndex(this.offset,50)}handleSearchEvent(i){console.log(JSON.stringify(i));var t=i.target.value.toLowerCase();if(""==t)return this.offset=0,this.hideViewMore=!1,void(this.hashtags=[...o.hashtagIndex.slice(this.offset,50)]);t.startsWith("#")||(t="#"+t);var s=o.hashtagIndex.filter(i=>i.hashtag.startsWith(t)).slice(0,50);this.hideViewMore=!0,this.hashtags=[...s]}showViewMore(){return this.hashtags.length>0&&!this.hideViewMore&&!this.onlyShowCensored?"":"viewMoreHidden"}render(){return[t("ion-header",null,t("ion-toolbar",{color:"medium"},t("ion-title",null,"WeiBlocked Hashtags"),t("ion-buttons",{slot:"end"},t("ion-button",{onClick:i=>{this.about(),i.preventDefault()}},t("ion-icon",{slot:"icon-only",name:"information-circle"})))),t("ion-toolbar",{color:"light",class:this.loading?"":"viewMoreHidden"},t("ion-title",null,"Loading... Please Wait")),t("ion-toolbar",{color:"light",class:this.loading?"viewMoreHidden":""},t("ion-input",{disabled:this.onlyShowCensored,class:"ion-padding",debounce:200,placeholder:"Type to Search",type:"text",onInput:i=>this.handleSearchEvent(i)}))),t("ion-content",{class:"ion-padding "+(this.loading?"viewMoreHidden":"")},t("ion-list",null,t("ion-list-header",{color:"light"},t("p",null,"Showing ",this.hashtags.length," of ",this.onlyShowCensored?o.censoredHashtags.length:o.hashtagIndex.length," Hashtags")),this.hashtags.map(i=>t("ion-item",null,t("ion-label",null,i.censored?t("ion-chip",{color:"danger"},t("ion-label",null,"CENSORED!")):"",t("ion-router-link",{href:`weibo-viewer/${i.hashtag}/posts`},i.hashtag)),t("ion-badge",{slot:"end"},i.count)))),t("ion-button",{class:this.hashtags.length>0&&!this.hideViewMore&&!this.onlyShowCensored?"":"viewMoreHidden",onClick:i=>(this.getNextPage(),console.log(i),!1),expand:"block",fill:"outline"},"View More...")),t("ion-footer",{color:"light"},t("ion-toolbar",null,t("ion-toggle",{slot:"start",onIonChange:i=>{this.toggleCensoredFilter(),i.preventDefault()}}),t("ion-title",null,"Censored Tags Only")))]}static get style(){return":host{display:block}.hscroll{width:100%;overflow-y:auto}.min-500{min-width:900px!important;width:100%}.darkred{color:#c00!important}.viewMoreHidden{display:none}"}};export{s as weibo_viewer};